<h1>Eat the Burger!</h1>

<ul>
    {{#each burgers}}
    <li>
        <p>
        {{this.burger_name}}
        <button data-burgerid="{{this.id}}" class="devourIt">Devour it!</button>
        </p>
    </li>
    {{/each}}
</ul>

<form id="makeBurger">
    <textarea type="text" name="burger"></textarea>
    <button type="submit">Submit</button>
    <p>Enter a burger you'd like to eat.</p>
</form>

<script type="text/javascript">
    $(".devourIt").on("click", function(e){
        var id = $(this).data("burgerid");

        $.ajax("/burgersList/"+id, {
            type:"DELETE"
    }).then(
        function(){
            console.log("Deleted/devoured burder id ", id);
            location.reload();
        }
    )


    $("#makeBurger").on("submit", function(e){
        e.preventDefault();
        var newBurger = {
            burger_name: $("#makeBurger [burger_name=burger]").val().trim();
        };

        $.ajax("/burgersList",{
            type:"POST",
            data: newBurger
        }).then(
            function(){
                console.log("created new burger");
                location.reload();
            }
        )
    });
</script>